<?xml version="1.0" encoding="UTF-8"?>

<opt:main xmlns:opt="http://www.jppf.org/Options.xsd" name="JPPFAdminTool" type="TabbedPane">

	<property name="label" value="JPPF Monitoring and Administration Tool"/>
	<property name="scrollable" value="false"/>
	<property name="orientation" value="horizontal"/>
	<property name="bordered" value="false"/>
	<property name="main" value="true"/>
	<property name="tooltip" value="Perform the remote administration of the server"/>
	<script language="javascript"><![CDATA[
		importPackage(Packages.java.lang);
		importPackage(Packages.java.util);
		importPackage(Packages.java.awt);
		importPackage(Packages.java.awt.event);
		importPackage(Packages.javax.swing);
		importPackage(Packages.org.jppf.utils);
		importPackage(Packages.org.jppf.server.protocol);
		importPackage(Packages.org.jppf.ui.monitoring);
		importPackage(Packages.org.jppf.ui.monitoring.charts.config);
		importPackage(Packages.org.jppf.ui.monitoring.data);
		importPackage(Packages.org.jppf.ui.options);
		importPackage(Packages.org.jppf.ui.options.event);
		importPackage(Packages.org.jppf.ui.options.factory);
	]]></script>
	<initializer type="script">
		<script language="javascript"><![CDATA[
			var comp = option.getUIComponent();
			var frame = new JFrame(option.getLabel());
			wa = 
			{
				windowClosing: function(event)
				{
					JPPFChartBuilder.getInstance().getStorage().saveAll();
					System.exit(0);
				}
			};
			frame.addWindowListener(new WindowAdapter(wa));
			var statsHandler = StatsHandler.getInstance();
			var builder = JPPFChartBuilder.getInstance();
			builder.createInitialCharts();
			var monitor = new MonitoringPanel();
			var BASE = "org.jppf.ui.i18n.StatsPage";
			comp.insertTab(StringUtils.getLocalized(BASE, "StatsPage.label"), null, new JScrollPane(monitor),
				StringUtils.getLocalized(BASE, "StatsPage.tooltip"), 0);
			comp.insertTab(StringUtils.getLocalized(BASE, "ChartsPage.label"), null, builder.getTabbedPane(), 
				StringUtils.getLocalized(BASE, "ChartsPage.tooltip"), 1);
			comp.setSelectedIndex(0);
			var ccPage = OptionsHandler.getPage("ChartsConfiguration");
			ccPage.getInitializer().valueChanged(new ValueChangeEvent(ccPage));
			frame.getContentPane().add(option.getUIComponent());
			frame.setSize(600, 600);
			frame.setVisible(true);
			statsHandler.addStatsHandlerListener(monitor);
			statsHandler.addStatsHandlerListener(builder);
			statsHandler.startRefreshTimer();
		]]></script>
	</initializer>

	<import source="file" location="org/jppf/ui/options/xml/ChartsConfigPage.xml"/>
	<import source="file" location="org/jppf/ui/options/xml/AdminPage.xml"/>
	<import source="file" location="org/jppf/ui/options/xml/BundleSizeTuningPage.xml"/>

</opt:main>
